<!-- Barra lateral derecha -->




<aside id="sidebar" class="sidebar">
    <!-- Barra superior del sidebar con bot√≥n de cerrar -->
    <div class="sidebar-topbar">
        <div class="sidebar-topbar-title"></div>
        <button id="sidebar-close-btn" class="sidebar-close-btn" title="Cerrar men√∫" aria-label="Cerrar men√∫">
            <i class="fas fa-times"></i>
        </button>
    </div>
    
    <!-- Panel de herramientas de dibujo -->
    <section class="sidebar-section">
        <div class="section-header" onclick="toggleSection('drawing-section')">
            <span class="section-icon">‚úèÔ∏è</span>
            <span class="section-title">Herramientas de Dibujo</span>
            <span class="section-toggle" id="drawing-toggle">‚ñº</span>
        </div>
        
        <div class="section-content" id="drawing-section">
            <!-- Herramientas de dibujo -->
            <div class="tools-group">
                <h4>Dibujar</h4>
                <div class="tools-grid">
                    <button class="tool-btn" onclick="activateDrawTool('marker')" title="Marcador">
                        üìç Marcador
                    </button>
                    <button class="tool-btn" onclick="activateDrawTool('polyline')" title="L√≠nea">
                        üìè L√≠nea
                    </button>
                    <button class="tool-btn" onclick="activateDrawTool('rectangle')" title="Rect√°ngulo">
                        üî≤ Rect√°ngulo
                    </button>
                    <button class="tool-btn" onclick="activateDrawTool('circle')" title="C√≠rculo">
                        ‚≠ï C√≠rculo
                    </button>
                    <button class="tool-btn" onclick="activateDrawTool('polygon')" title="Pol√≠gono">
                        üî∫ Pol√≠gono
                    </button>
                </div>
            </div>

            <!-- Acciones de edici√≥n -->
            <div class="tools-group">
                <h4>Editar</h4>
                <div class="actions-grid">
                    <button class="tool-btn edit-btn" onclick="toggleEditMode()" title="Editar dibujos">
                        ‚úèÔ∏è Editar
                    </button>
                    <button class="tool-btn delete-btn" onclick="clearAllDrawings()" title="Eliminar todos los dibujos">
                        üóëÔ∏è Limpiar
                    </button>
                </div>
            </div>

            <!-- Exportaci√≥n -->
            <div class="tools-group">
                <h4>Exportar</h4>
                <button id="export" class="export-btn">
                    üì• Exportar Dibujos (0)
                </button>
            </div>
        </div>
    </section>
    <!-- Panel de herramientas avanzadas 
    <section class="sidebar-section">
        <div class="section-header" onclick="toggleSection('advanced-section')">
            <span class="section-icon">‚öôÔ∏è</span>
            <span class="section-title">Herramientas Avanzadas</span>
            <span class="section-toggle" id="advanced-toggle">‚ñº</span>
        </div>
        
        <div class="section-content" id="advanced-section">
            <!-- Herramientas de an√°lisis 
            <div class="tools-group">
                <h4>An√°lisis</h4>
                <div class="tools-grid">
                    <button class="tool-btn analysis-btn" onclick="measureDistance()" title="Medir distancia">
                        üìè Medir
                    </button>
                    <button class="tool-btn analysis-btn" onclick="measureArea()" title="Medir √°rea">
                        üìê √Årea
                    </button>
                    <button class="tool-btn analysis-btn" onclick="getCoordinates()" title="Obtener coordenadas">
                        üìç Coordenadas
                    </button>
                    <button class="tool-btn analysis-btn" onclick="showStatistics()" title="Estad√≠sticas">
                        üìä Estad√≠sticas
                    </button>
                </div>
            </div>

            <!-- Herramientas de configuraci√≥n
            <div class="tools-group">
                <h4>Configuraci√≥n</h4>
                <div class="tools-grid">
                    <button class="tool-btn config-btn" onclick="resetView()" title="Vista inicial">
                        üè† Inicio
                    </button>
                    <button class="tool-btn config-btn" onclick="toggleFullscreen()" title="Pantalla completa">
                        ‚õ∂ Pantalla Completa
                    </button>
                    <button class="tool-btn config-btn" onclick="exportMap()" title="Exportar mapa">
                        üíæ Exportar
                    </button>
                    <button class="tool-btn config-btn" onclick="showHelp()" title="Ayuda">
                        ‚ùì Ayuda
                    </button>
                </div>
            </div>
        </div>
    </section>-->

    <!-- Panel de capas del mapa -->
    <section class="sidebar-section">
        <div class="section-header" onclick="toggleSection('layers-section')">
            <span class="section-icon">üó∫Ô∏è</span>
            <span class="section-title">Capas del Mapa</span>
            <span class="section-toggle" id="layers-toggle">‚ñº</span>
        </div>
        
        <div class="section-content" id="layers-section">
            <div class="layers-container" id="layers-container">
                <!-- El control de capas de Leaflet se insertar√° aqu√≠ -->
            </div>
        </div>
    </section>

    <!-- Panel de Agua Temporal (NUEVO) -->
<section class="sidebar-section">
    <div class="section-header" onclick="toggleSection('agua-temporal-section')">
        <span class="section-icon">üíß</span>
        <span class="section-title">Agua Temporal 2020</span>
        <span class="section-toggle" id="agua-temporal-toggle">‚ñº</span>
    </div>
    
    <div class="section-content" id="agua-temporal-section">
        <div class="tools-group">
            <h4>Temporadas Detectadas</h4>
            <p class="section-description">Cuerpos de agua detectados con Sentinel-1 SAR</p>
            
            <!-- Controles de capas de agua -->
            <div class="agua-temporal-controls">
                <label class="agua-layer-item">
                    <input type="checkbox" id="agua-primavera" onchange="toggleAguaLayer('primavera', this.checked)">
                    <span class="layer-color" style="background: #3b82f6;"></span>
                    <span>Primavera</span>
                </label>
                
                <label class="agua-layer-item">
                    <input type="checkbox" id="agua-verano" onchange="toggleAguaLayer('verano', this.checked)">
                    <span class="layer-color" style="background: #eab308;"></span>
                    <span>Verano</span>
                </label>
                
                <label class="agua-layer-item">
                    <input type="checkbox" id="agua-otono" onchange="toggleAguaLayer('otono', this.checked)">
                    <span class="layer-color" style="background: #f97316;"></span>
                    <span>Oto√±o</span>
                </label>
                
                <label class="agua-layer-item">
                    <input type="checkbox" id="agua-invierno" onchange="toggleAguaLayer('invierno', this.checked)">
                    <span class="layer-color" style="background: #06b6d4;"></span>
                    <span>nvierno</span>
                </label>
            </div>
            
            <!-- Botones de acci√≥n -->
            <div class="agua-actions" style="margin-top: 15px;">
                <button class="tool-btn" onclick="activarTodasLasCapasAgua()" title="Mostrar todas">
                    Mostrar Todas
                </button>
                <button class="tool-btn delete-btn" onclick="desactivarTodasLasCapasAgua()" title="Ocultar todas">
                    Ocultar Todas
                </button>
            </div>
            
            <!-- Informaci√≥n adicional -->
            <div class="agua-info" style="margin-top: 15px; padding: 10px; background: rgba(59, 130, 246, 0.1); border-radius: 5px;">
                <p style="margin: 0; font-size: 0.85em; color: #64748b;">
                    <strong>Fuente:</strong> Sentinel-1 GRD<br>
                    <strong>Procesamiento:</strong> Google Earth Engine & SNAP<br>
                    <strong>Servidor:</strong> GeoServer
                </p>
            </div>
        </div>
    </div>
</section>
    <!-- Panel de radar integrado - Minimizable (al final) -->
    <section class="sidebar-section">
        <div class="section-header radar-header" onclick="toggleRadarSection()">
            <span class="section-icon">üì°</span>
            <span class="section-title">Sistema Radar</span>
            <span class="section-toggle" id="radar-toggle">‚ñº</span>
        </div>
        
        <div class="section-content show" id="radar-section">
            <div class="radar-container">
                <div class="radar-screen">
                    <div class="radar-grid"></div>
                    <div class="radar-sweep"></div>
                    <!-- Puntos de radar generados din√°micamente -->
                </div>
                <div class="radar-label">
                    <i class="fas fa-radar"></i> Monitoreo Activo
                </div>
                <div class="radar-stats">
                    <div class="radar-stat-item">
                        <span>Objetos detectados:</span>
                        <span class="radar-stat-value" id="radar-objects">0</span>
                    </div>
                    <div class="radar-stat-item">
                        <span>√öltima actualizaci√≥n:</span>
                        <span class="radar-stat-value" id="radar-time">--:--</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

</aside>
